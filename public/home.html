<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Home</title>
</head>
<body>
<h1>Welcome!</h1>
<p>You are signed in ✅</p>

<p><a href="/index.html">Go to store</a></p>

<button id="logoutBtn">Sign out</button>

<script>
  // Проверяем вход
  fetch("/api/auth/me")
    .then(r => r.json())
    .then(d => { if (!d.user) location.href="/login.html"; });

  // Выход
  document.getElementById("logoutBtn").onclick = async () => {
    await fetch("/api/auth/logout", { method: "POST" });
    location.href = "/login.html";
  };
</script>
</body>
</html>
